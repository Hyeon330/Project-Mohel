<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.finalproject.mohel.dao.MypageDAO">
	<update id="updateUserInfo">
		update member
		set nickname=#{nickname}, tel=#{tel}, profile=#{profile}, birthdate=#{birthdate}, gender=#{gender}, age=${age}, height=${height}, weight=${weight}, active=#{active}, BMR=#{BMR}, AMR=#{AMR}
		where email=#{email}
		<if test="pwd!=null">
		and pwd=#{pwd}
		</if>
	</update>
	
	<select id="selectMyBoardList" resultType="BoardVO">
		select no, title, category, writedate, hit
		from board
		where nickname=#{param1}
		<if test="param2!=null">
			and category=#{param2}
		</if>
		<if test="param3.searchWord!=null">
			and ${param3.searchKey} like "%${param3.searchWord}%"
		</if>
		order by no desc
		limit ${param3.onePageRecord} offset ${param3.offsetIndex}
	</select>
	
	<select id="totalRecord" resultType="int">
  		select count(no) cnt from ${param1}
  		where nickname=#{param2}
  		<if test="param3!=null">
			and category=#{param3}
		</if>
		<if test="param4.searchWord!=null">
			and ${param4.searchKey} like "%${param4.searchWord}%"
		</if>
  	</select>
</mapper>